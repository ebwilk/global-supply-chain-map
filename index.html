<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ford Logistics Command Center</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons (Visuals) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Custom Styles for Animations -->
    <style>
        .fade-in { animation: fadeIn 0.2s ease-out; }
        .slide-in { animation: slideIn 0.3s ease-out; }
        .zoom-in { animation: zoomIn 0.2s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* Map Pin Hover Effects */
        .pin-container:hover .pin-tooltip { display: block; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 p-4 md:p-8 min-h-screen">

    <!-- Dashboard Container -->
    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-xl overflow-hidden border border-slate-200 relative">
        
        <!-- KPI Strip -->
        <div class="grid grid-cols-2 md:grid-cols-4 divide-x divide-slate-100 border-b border-slate-100 bg-white">
            
            <!-- KPI: On Time -->
            <div onclick="openModal('onTime')" class="p-5 flex items-center gap-4 transition-all cursor-pointer group hover:bg-slate-50">
                <div class="w-12 h-12 rounded-full flex items-center justify-center border bg-green-50 border-green-100 text-green-600 group-hover:bg-green-100 transition-colors">
                    <i data-lucide="check-circle-2" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-[11px] text-slate-400 uppercase tracking-widest font-bold group-hover:text-slate-600 transition-colors">On Time</p>
                    <p class="text-2xl font-bold text-slate-800">1,248</p>
                </div>
            </div>

            <!-- KPI: In Transit -->
            <div onclick="openModal('inTransit')" class="p-5 flex items-center gap-4 transition-all cursor-pointer group hover:bg-slate-50">
                <div class="w-12 h-12 rounded-full flex items-center justify-center border bg-blue-50 border-blue-100 text-[#2D96CD] group-hover:bg-blue-100 transition-colors">
                    <i data-lucide="ship" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-[11px] text-slate-400 uppercase tracking-widest font-bold group-hover:text-slate-600 transition-colors">In Transit</p>
                    <p class="text-2xl font-bold text-slate-800">432</p>
                </div>
            </div>

            <!-- KPI: At Risk -->
            <div onclick="openModal('atRisk')" class="p-5 flex items-center gap-4 transition-all cursor-pointer group hover:bg-slate-50">
                <div class="w-12 h-12 rounded-full flex items-center justify-center border bg-orange-50 border-orange-100 text-orange-600 group-hover:bg-orange-100 transition-colors">
                    <i data-lucide="box" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-[11px] text-slate-400 uppercase tracking-widest font-bold group-hover:text-slate-600 transition-colors">At Risk</p>
                    <p class="text-2xl font-bold text-slate-800">12</p>
                </div>
            </div>

            <!-- KPI: Critical -->
            <div onclick="openModal('critical')" class="p-5 flex items-center gap-4 transition-all cursor-pointer group bg-red-50/30 hover:bg-red-50/50 border-l-4 border-l-[#D92C25] md:border-l-0">
                <div class="w-12 h-12 rounded-full flex items-center justify-center border bg-red-100 border-red-200 text-[#D92C25] animate-pulse">
                    <i data-lucide="alert-circle" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-[11px] text-[#D92C25] uppercase tracking-widest font-bold">Critical</p>
                    <p class="text-2xl font-bold text-[#D92C25]">1</p>
                </div>
            </div>
        </div>

        <!-- Details Modal (Hidden by default) -->
        <div id="kpiModal" class="hidden absolute top-[88px] left-0 right-0 bottom-0 z-50 bg-slate-900/10 backdrop-blur-sm p-4 flex justify-end fade-in">
            <div class="bg-white w-full max-w-md h-full rounded-xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden slide-in">
                <!-- Header -->
                <div id="modalHeader" class="px-6 py-4 border-b flex justify-between items-center bg-slate-50">
                    <div>
                        <h3 id="modalTitle" class="font-bold text-lg text-slate-700">Category Title</h3>
                        <p class="text-xs text-slate-500 mt-1">Real-time manifest data</p>
                    </div>
                    <button onclick="closeModal()" class="p-2 hover:bg-white/50 rounded-full transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-slate-500"></i>
                    </button>
                </div>
                <!-- Content List -->
                <div id="modalContent" class="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50">
                    <!-- Javascript will inject items here -->
                </div>
                <!-- Footer -->
                <div class="p-4 bg-white border-t border-slate-100">
                    <button onclick="closeModal()" class="w-full py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors">
                        Close Panel
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="p-6 relative bg-slate-50">
            
            <div class="flex justify-between items-end mb-4">
                <div>
                    <div class="flex items-center gap-2 mb-1">
                        <i data-lucide="globe" class="w-4 h-4 text-[#2D96CD]"></i>
                        <h2 class="text-lg font-bold text-[#00095B] tracking-tight">Global Network Intelligence</h2>
                    </div>
                    <p class="text-xs text-slate-500 font-medium">Live satellite tracking of Tier 1 supply chain.</p>
                </div>
                
                <!-- Legend -->
                <div class="flex gap-3">
                    <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-md shadow-sm border border-slate-200">
                        <span class="w-2 h-2 rounded-full bg-[#3E8D62] shadow-[0_0_8px_rgba(62,141,98,0.6)]"></span> 
                        <span class="text-xs font-semibold text-slate-600">Optimal</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-md shadow-sm border border-slate-200">
                        <span class="w-2 h-2 rounded-full bg-[#D92C25] animate-pulse shadow-[0_0_8px_rgba(217,44,37,0.6)]"></span> 
                        <span class="text-xs font-semibold text-slate-600">Disruption</span>
                    </div>
                </div>
            </div>

            <!-- MAP WIDGET CONTAINER -->
            <div class="relative w-full aspect-[21/9] bg-[#020617] rounded-xl overflow-hidden shadow-2xl border border-slate-700 group isolation-auto" id="mapContainer">
                
                <!-- 1. Base Map Image -->
                <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Aurora_as_seen_by_IMAGE.jpg/1280px-Aurora_as_seen_by_IMAGE.jpg'); background-size: 110% 110%; background-position: center 40%; filter: grayscale(30%) brightness(50%) contrast(110%) hue-rotate(190deg) saturate(150%);"></div>

                <!-- 2. Overlay -->
                <div class="absolute inset-0 bg-[#00095B] mix-blend-color opacity-40"></div>
                
                <!-- 3. Grid -->
                <div class="absolute inset-0 opacity-20 pointer-events-none" style="background-image: linear-gradient(rgba(255, 255, 255, 0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.2) 1px, transparent 1px); background-size: 60px 60px;"></div>

                <!-- 4. Shipping Lanes (SVG) -->
                <svg class="absolute inset-0 w-full h-full pointer-events-none opacity-30">
                    <path d="M 28% 35% Q 38% 30% 49% 30%" fill="none" stroke="#2D96CD" stroke-width="1" stroke-dasharray="4 4" />
                    <path d="M 78% 40% Q 95% 35% 99% 35%" fill="none" stroke="#2D96CD" stroke-width="1" stroke-dasharray="4 4" />
                    <path d="M 0% 35% Q 10% 35% 26% 35%" fill="none" stroke="#2D96CD" stroke-width="1" stroke-dasharray="4 4" />
                </svg>

                <!-- PINS WILL BE INJECTED HERE VIA JS -->
                <div id="pinsLayer"></div>

                <!-- Map UI -->
                <div class="absolute bottom-4 left-6 text-white/50 font-mono text-[10px]">
                    LAT: 51.9244° N <br/> LON: 4.4777° E
                </div>
                <div class="absolute top-4 right-6 flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                    <span class="text-green-400 font-mono text-[10px] tracking-wider">LIVE FEED</span>
                </div>
            </div>
            
            <!-- Map Footer Cards -->
            <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                
                <!-- Atlantic Route -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer group">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Route Atlantic</h4>
                            <div class="flex items-center gap-2 text-[#00095B]">
                                <i data-lucide="ship" class="w-4 h-4"></i>
                                <span class="text-sm font-bold">HMM Algeciras</span>
                            </div>
                        </div>
                        <div class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded">ON TIME</div>
                    </div>
                    <div class="mt-3 w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                        <div class="bg-[#2D96CD] h-full w-[70%] group-hover:animate-pulse"></div>
                    </div>
                </div>

                <!-- Pacific Route -->
                <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer group">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Route Pacific</h4>
                            <div class="flex items-center gap-2 text-[#00095B]">
                                <i data-lucide="ship" class="w-4 h-4"></i>
                                <span class="text-sm font-bold">ONE Apus</span>
                            </div>
                        </div>
                        <div class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded">ON TIME</div>
                    </div>
                    <div class="mt-3 w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                        <div class="bg-[#2D96CD] h-full w-[45%] group-hover:animate-pulse"></div>
                    </div>
                </div>

                <!-- Rotterdam Alert -->
                <div onclick="openModal('critical')" class="bg-red-50 p-4 rounded-lg border border-red-100 shadow-sm flex flex-col justify-between hover:border-red-200 transition-colors cursor-pointer">
                    <div class="flex items-start gap-3">
                        <i data-lucide="alert-circle" class="w-5 h-5 text-[#D92C25] shrink-0"></i>
                        <div>
                            <h4 class="text-sm font-bold text-[#D92C25] leading-tight">Rotterdam Strike Update</h4>
                            <p class="text-xs text-red-700 mt-1">Negotiations stalled. 48hr delay confirmed for incoming freight.</p>
                        </div>
                    </div>
                    <div class="mt-3 flex items-center justify-between">
                        <span class="text-[10px] font-bold text-red-400 uppercase">Updated 10m ago</span>
                        <span class="text-xs font-bold text-[#D92C25] flex items-center gap-1 group">
                            View Plan <span class="group-hover:translate-x-1 transition-transform">→</span>
                        </span>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. DATA CONFIGURATION ---
        const locations = [
            { id: 1, name: 'Dearborn HQ', x: 26, y: 34, status: 'normal' },
            { id: 2, name: 'Valencia Plant', x: 48, y: 35, status: 'normal' },
            { id: 3, name: 'Silverton Assembly', x: 55, y: 80, status: 'normal' },
            { id: 4, name: 'Changan Ford', x: 78, y: 40, status: 'normal' },
            { id: 5, name: 'San Luis Potosi', x: 22, y: 46, status: 'normal' },
            { id: 6, name: 'Chennai Plant', x: 68, y: 54, status: 'normal' },
            { id: 7, name: 'Cologne Body & Assembly', x: 50, y: 30, status: 'normal' },
            { 
                id: 99, 
                name: 'Rotterdam Port', 
                x: 49, y: 30, 
                status: 'critical',
                alert: { title: 'Port Strike Alert', time: '48hr Delay', impact: 'Raw Materials B' }
            },
        ];

        const kpiData = {
            onTime: {
                title: "On Time Shipments",
                class: "bg-green-50 border-green-100 text-green-700",
                items: [
                    { id: "SH-2024-001", main: "Shanghai -> Long Beach", sub: "Electronics", status: "On Schedule" },
                    { id: "SH-2024-002", main: "Hamburg -> Newark", sub: "Powertrain Components", status: "On Schedule" },
                    { id: "SH-2024-003", main: "Busan -> Seattle", sub: "Body Panels", status: "Arriving Early" }
                ]
            },
            inTransit: {
                title: "Active Transit",
                class: "bg-blue-50 border-blue-100 text-blue-700",
                items: [
                    { id: "TR-8821", main: "HMM Algeciras", sub: "Atlantic Route A", status: "ETA: 2 days" },
                    { id: "TR-9923", main: "ONE Apus", sub: "Pacific Route B", status: "ETA: 5 days" },
                    { id: "TR-7712", main: "Ever Given", sub: "Suez Canal", status: "ETA: 12 days" }
                ]
            },
            atRisk: {
                title: "At Risk / Warning",
                class: "bg-orange-50 border-orange-100 text-orange-700",
                items: [
                    { id: "AR-101", main: "Taiwan Strait", sub: "Weather Delay", status: "+12h ETA", alert: true },
                    { id: "AR-102", main: "Veracruz Port", sub: "Customs Hold", status: "Pending Release", alert: true },
                    { id: "AR-103", main: "Rail Line B", sub: "Maintenance", status: "+6h Delay", alert: true }
                ]
            },
            critical: {
                title: "Critical Disruptions",
                class: "bg-red-50 border-red-100 text-red-700",
                items: [
                    { id: "CR-99", main: "Rotterdam Port", sub: "Labor Strike (Active)", status: "48h Stoppage", critical: true }
                ]
            }
        };

        // --- 2. RENDER PINS ---
        const pinsLayer = document.getElementById('pinsLayer');
        
        locations.forEach(loc => {
            const el = document.createElement('div');
            el.className = "absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer z-10 pin-container";
            el.style.left = `${loc.x}%`;
            el.style.top = `${loc.y}%`;

            if (loc.status === 'critical') {
                // Critical Pin HTML
                el.innerHTML = `
                    <div class="relative">
                        <span class="absolute -inset-4 rounded-full border border-red-500/50 opacity-0 animate-ping"></span>
                        <span class="absolute -inset-8 rounded-full border border-red-500/30 opacity-0 animate-[ping_2s_cubic-bezier(0,0,0.2,1)_infinite]"></span>
                        <div class="relative flex items-center justify-center w-8 h-8 bg-[#D92C25] rounded-full shadow-[0_0_15px_rgba(217,44,37,0.8)] border border-white/20 text-white z-20 hover:scale-110 transition-transform">
                            <i data-lucide="anchor" class="w-4 h-4"></i>
                        </div>
                        
                        <!-- Tooltip -->
                        <div class="pin-tooltip hidden absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-72 z-50">
                            <div class="bg-slate-900/95 backdrop-blur-md rounded-lg shadow-2xl border border-red-500/50 overflow-hidden text-white zoom-in">
                                <div class="bg-gradient-to-r from-[#D92C25] to-red-900 px-4 py-2 flex justify-between items-center">
                                    <div class="flex items-center gap-2"><i data-lucide="activity" class="w-3 h-3 text-white animate-pulse"></i><span class="text-xs font-bold uppercase">Active Alert</span></div>
                                    <span class="text-[10px] font-mono bg-black/20 px-2 py-0.5 rounded">ERR_99</span>
                                </div>
                                <div class="p-4">
                                    <h4 class="font-bold mb-1">${loc.alert.title}</h4>
                                    <p class="text-xs text-red-200 mb-3">${loc.alert.time} • ${loc.alert.impact}</p>
                                    <button onclick="event.stopPropagation(); openModal('critical')" class="w-full bg-white text-[#00095B] text-xs font-bold py-2 rounded">VIEW MANIFEST</button>
                                </div>
                            </div>
                            <div class="w-px h-4 bg-red-500 absolute left-1/2 -translate-x-1/2 -bottom-4"></div>
                        </div>
                    </div>
                `;
            } else {
                // Normal Pin HTML
                el.innerHTML = `
                    <div class="group relative flex items-center justify-center">
                        <div class="w-2 h-2 bg-[#4ade80] rounded-full shadow-[0_0_10px_#4ade80] z-10"></div>
                        <div class="absolute w-4 h-4 bg-[#4ade80] rounded-full opacity-20 animate-pulse"></div>
                        <div class="absolute top-6 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap">
                           <div class="bg-slate-900 text-white text-[10px] px-2 py-1 rounded border border-slate-700 shadow-xl font-medium tracking-wide">
                              ${loc.name}
                           </div>
                        </div>
                    </div>
                `;
            }
            pinsLayer.appendChild(el);
        });

        // --- 3. MODAL LOGIC ---
        function openModal(category) {
            const modal = document.getElementById('kpiModal');
            const data = kpiData[category];
            const contentDiv = document.getElementById('modalContent');
            const headerDiv = document.getElementById('modalHeader');
            
            // Set Header Styling
            headerDiv.className = `px-6 py-4 border-b flex justify-between items-center ${data.class.replace('text-', 'border-').split(' ')[0]}`; // quick hack to get bg color from class string
            document.getElementById('modalTitle').textContent = data.title;
            document.getElementById('modalTitle').className = `font-bold text-lg ${data.class.split(' ').pop()}`; // get text color

            // Generate List Items
            contentDiv.innerHTML = data.items.map(item => `
                <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100 hover:shadow-md transition-shadow group">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded">${item.id}</span>
                        ${item.critical ? '<span class="text-[10px] font-bold bg-red-100 text-red-700 px-2 py-0.5 rounded uppercase">Action Req</span>' : ''}
                        ${item.alert ? '<span class="text-[10px] font-bold bg-orange-100 text-orange-700 px-2 py-0.5 rounded uppercase">Warning</span>' : ''}
                    </div>
                    <div class="mb-2">
                        <h4 class="font-semibold text-slate-800 text-sm">${item.main}</h4>
                        <p class="text-xs text-slate-500">${item.sub}</p>
                    </div>
                    <div class="flex items-center gap-3 mt-3 pt-3 border-t border-slate-50">
                        <div class="flex items-center gap-1.5">
                            <i data-lucide="clock" class="w-3.5 h-3.5 text-slate-400"></i>
                            <span class="text-xs font-medium text-slate-700">${item.status}</span>
                        </div>
                    </div>
                    <button class="w-full mt-3 text-xs font-medium py-2 rounded bg-slate-50 text-slate-600 hover:bg-[#00095B] hover:text-white transition-colors flex items-center justify-center gap-2">
                        View Manifest <i data-lucide="arrow-right" class="w-3 h-3"></i>
                    </button>
                </div>
            `).join('');

            // Show Modal
            modal.classList.remove('hidden');
            
            // Re-initialize icons for new content
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('kpiModal').classList.add('hidden');
        }

        // Initialize Icons on Load
        lucide.createIcons();
    </script>
</body>
</html>
